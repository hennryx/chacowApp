
<div
    class="fixed inset-0 z-10 flex items-center justify-center w-full h-full bg-black bg-opacity-50"
    *ngIf="isFormModalOpen || isEditModalOpen"
>
    <div class="w-full max-w-md p-6 bg-white rounded-lg shadow-lg">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold text-gray-700">
                {{ isEditModalOpen ? 'Edit Schedule' : 'New Schedule' }}
            </h3>
            <div class="cursor-pointer" (click)="closeModal()">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"class="w-6 h-6 text-gray-600 hover:text-gray-800" >
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                        <path d="M8.00191 9.41621C7.61138 9.02569 7.61138 8.39252 8.00191 8.002C8.39243 7.61147 9.0256 7.61147 9.41612 8.002L12.0057 10.5916L14.5896 8.00771C14.9801 7.61719 15.6133 7.61719 16.0038 8.00771C16.3943 8.39824 16.3943 9.0314 16.0038 9.42193L13.4199 12.0058L16.0039 14.5897C16.3944 14.9803 16.3944 15.6134 16.0039 16.004C15.6133 16.3945 14.9802 16.3945 14.5896 16.004L12.0057 13.42L9.42192 16.0038C9.03139 16.3943 8.39823 16.3943 8.00771 16.0038C7.61718 15.6133 7.61718 14.9801 8.00771 14.5896L10.5915 12.0058L8.00191 9.41621Z" fill="#0F0F0F"></path> 
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M23 4C23 2.34315 21.6569 1 20 1H4C2.34315 1 1 2.34315 1 4V20C1 21.6569 2.34315 23 4 23H20C21.6569 23 23 21.6569 23 20V4ZM21 4C21 3.44772 20.5523 3 20 3H4C3.44772 3 3 3.44772 3 4V20C3 20.5523 3.44772 21 4 21H20C20.5523 21 21 20.5523 21 20V4Z" fill="#0F0F0F"></path> 
                    </g>
                </svg>
            </div>
        </div>
        <form
            [formGroup]="scheduleForm"
            (ngSubmit)="saveSchedule($event)"
        >
            <div class="mt-6 flex flex-col gap-4">
                <label class="text-sm text-gray-500">Teacher:
                    <div class="relative inline-flex items-center w-full">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute left-2 inline-block w-4 h-4">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M12.7071 14.7071C12.3166 15.0976 11.6834 15.0976 11.2929 14.7071L6.29289 9.70711C5.90237 9.31658 5.90237 8.68342 6.29289 8.29289C6.68342 7.90237 7.31658 7.90237 7.70711 8.29289L12 12.5858L16.2929 8.29289C16.6834 7.90237 17.3166 7.90237 17.7071 8.29289C18.0976 8.68342 18.0976 9.31658 17.7071 9.70711L12.7071 14.7071Z"
                                fill="#000000">
                            </path>
                            </g>
                        </svg>
                        <select
                            formControlName="teacherid"
                            class="px-4 w-full py-2 pl-8 bg-white border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 apperance-none text-right">
                            <option 
                                *ngFor="let teacher of teachers" 
                                [ngValue]="teacher.id" 
                                class="text-black"
                            >
                                {{ teacher.firstname + " " + teacher.lastname }}
                            </option>
                        </select>
                    </div>
                </label>

                <label class="text-sm text-gray-500">Time start:
                    <input
                        formControlName="TimeStart"
                        type="time"
                        class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
                    />
                </label>
                <label class="text-sm text-gray-500">Time end:
                    <input
                        formControlName="TimeEnd"
                        type="time"
                        class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
                    />    
                </label>

                <label class="text-sm text-gray-500">Subject:
                    <div class="relative inline-flex items-center w-full">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute left-2 inline-block w-4 h-4">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M12.7071 14.7071C12.3166 15.0976 11.6834 15.0976 11.2929 14.7071L6.29289 9.70711C5.90237 9.31658 5.90237 8.68342 6.29289 8.29289C6.68342 7.90237 7.31658 7.90237 7.70711 8.29289L12 12.5858L16.2929 8.29289C16.6834 7.90237 17.3166 7.90237 17.7071 8.29289C18.0976 8.68342 18.0976 9.31658 17.7071 9.70711L12.7071 14.7071Z"
                                fill="#000000">
                            </path>
                            </g>
                        </svg>
                        <select
                            formControlName="subjectid"
                            class="px-4 w-full py-2 pl-8 bg-white border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 apperance-none text-right">
                            <option 
                                *ngFor="let subject of subjects" 
                                [ngValue]="subject.id"
                                class="text-black"
                            >
                                {{ subject.subjectname }}
                            </option>
                        </select>
                    </div>
                </label>

                <label class="text-sm text-gray-500">Batch:
                    <div class="relative inline-flex items-center w-full">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute left-2 inline-block w-4 h-4">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M12.7071 14.7071C12.3166 15.0976 11.6834 15.0976 11.2929 14.7071L6.29289 9.70711C5.90237 9.31658 5.90237 8.68342 6.29289 8.29289C6.68342 7.90237 7.31658 7.90237 7.70711 8.29289L12 12.5858L16.2929 8.29289C16.6834 7.90237 17.3166 7.90237 17.7071 8.29289C18.0976 8.68342 18.0976 9.31658 17.7071 9.70711L12.7071 14.7071Z"
                                fill="#000000">
                            </path>
                            </g>
                        </svg>
                        <select
                        formControlName="batchid"
                        class="px-4 w-full py-2 pl-8 bg-white border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 apperance-none text-right">
                        <option 
                            *ngFor="let batch of batches" 
                            [ngValue]="batch.id" 
                            class="text-black"
                        >
                            {{ batch.batchname }}
                        </option>
                    </select>
                    </div>
                </label>
                
                <label class="text-sm text-gray-500">
                    <span>Every:</span>
                    <hr class="my-2">
                    <div class="grid grid-cols-3 gap-2">
                        <label class="col-span-1 bg-gray-100 p-2 rounded-md flex items-center justify-center gap-2" *ngFor="let day of ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']">
                            <input 
                                type="radio" 
                                class="hidden peer" 
                                [id]="day"
                                [value]="day"  
                                formControlName="every"
                            >
                            <div class="w-4 h-4 rounded-full border border-gray-300 bg-white peer-checked:bg-blue-500 flex items-center justify-center">
                                <svg class="w-4 h-4 text-white hidden peer-checked:block" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </div>
                            <span>{{ day }}</span>
                        </label>
                    </div>
                </label>

            </div>
            <div class="flex justify-end mt-4">
                <p-button 
                    type="submit"
                    class="px-4 py-2 text-white bg-[#012970] rounded-lg hover:bg-blue-700"
                    [loading]="loading" 
                    [label]="isEditModalOpen ? 'Update Schedule' : 'Save Schedule'"
                />
            </div>
        </form>
    </div>
</div>